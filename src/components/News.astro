---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const news = [
  {
    title: t("news.items.2.title"),
    excerpt: t("news.items.2.excerpt"),
    date: "2024-03-10",
    image:
      "https://i.pinimg.com/736x/eb/eb/b7/ebebb71e0bbc0e86ac548416b1f16f09.jpg",
    category: t("news.categories.lifestyle"),
    url: "#"
  },
  {
    title: t("news.items.0.title"),
    excerpt: t("news.items.0.excerpt"),
    date: "2024-03-20",
    image:
      "https://i.pinimg.com/736x/eb/eb/b7/ebebb71e0bbc0e86ac548416b1f16f09.jpg",
    category: t("news.categories.conservation"),
    url: "#"
  },
  {
    title: t("news.items.1.title"),
    excerpt: t("news.items.1.excerpt"),
    date: "2024-03-15",
    image:
      "https://i.pinimg.com/736x/eb/eb/b7/ebebb71e0bbc0e86ac548416b1f16f09.jpg",
    category: t("news.categories.research"),
    url: "#"
  }
];
---

<section id="news" class="py-20">
  <div class="container mx-auto px-4">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">{t("news.title")}</h2>
      <p class="text-warm-700 dark:text-warm-300">{t("news.subtitle")}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        news.map((item, index) => (
          <article class="bg-white dark:bg-warm-900 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300 group">
            <a href={item.url} class="block">
              <div class="relative overflow-hidden">
                <img
                  src={item.image || "/placeholder.svg"}
                  alt={item.title}
                  class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105"
                />
                <div class="absolute top-4 left-4 px-3 py-1 bg-warm-600 dark:bg-warm-500 text-white text-xs font-medium rounded-full">
                  {item.category}
                </div>
              </div>

              <div class="p-6">
                <div class="flex items-center gap-2 text-warm-600 dark:text-warm-400 text-sm mb-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="w-4 h-4"
                  >
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                    <line x1="16" y1="2" x2="16" y2="6" />
                    <line x1="8" y1="2" x2="8" y2="6" />
                    <line x1="3" y1="10" x2="21" y2="10" />
                  </svg>
                  <time datetime={item.date}>
                    {new Date(item.date).toLocaleDateString(
                      lang === "es" ? "es-ES" : "en-US",
                      {
                        year: "numeric",
                        month: "long",
                        day: "numeric"
                      }
                    )}
                  </time>
                </div>

                <h3 class="text-xl font-bold mb-3 group-hover:text-warm-600 dark:group-hover:text-warm-400 transition-colors">
                  {item.title}
                </h3>

                <p class="text-warm-700 dark:text-warm-300 mb-4">
                  {item.excerpt}
                </p>

                <div class="flex items-center gap-2 text-warm-600 dark:text-warm-400 font-medium group-hover:text-warm-800 dark:group-hover:text-warm-200 transition-colors">
                  {t("news.readMore")}
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="w-4 h-4 group-hover:translate-x-1 transition-transform"
                  >
                    <line x1="5" y1="12" x2="19" y2="12" />
                    <polyline points="12 5 19 12 12 19" />
                  </svg>
                </div>
              </div>
            </a>
          </article>
        ))
      }
    </div>

    <div class="mt-12 text-center">
      <a
        href="#"
        class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-warm-200 dark:bg-warm-800 text-warm-900 dark:text-warm-50 rounded-full font-medium hover:bg-warm-300 dark:hover:bg-warm-700 transition-colors"
      >
        {t("news.viewAll")}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-4 h-4"
        >
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
          ></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
      </a>
    </div>

    <!-- Newsletter subscription -->
    <div class="mt-20 bg-warm-200 dark:bg-warm-800 rounded-2xl p-8 md:p-12">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
        <div>
          <h3 class="text-2xl font-bold mb-3">{t("news.newsletter.title")}</h3>
          <p class="text-warm-700 dark:text-warm-300 mb-6">
            {t("news.newsletter.description")}
          </p>

          <div class="flex items-center gap-3 text-warm-700 dark:text-warm-300">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-5 h-5"
            >
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            <span class="text-sm">{t("news.newsletter.privacy")}</span>
          </div>
        </div>

        <div>
          <form class="space-y-4">
            <div>
              <label for="email" class="block text-sm font-medium mb-2"
                >{t("news.newsletter.email")}</label
              >
              <input
                type="email"
                id="email"
                placeholder="you@example.com"
                class="w-full px-4 py-3 rounded-lg border border-warm-300 dark:border-warm-700 bg-white dark:bg-warm-900 focus:outline-none focus:ring-2 focus:ring-warm-500"
                required
              />
            </div>
            <button
              type="submit"
              class="w-full px-6 py-3 bg-warm-600 text-white rounded-lg font-medium hover:bg-warm-700 dark:bg-warm-500 dark:hover:bg-warm-600 transition-colors"
            >
              {t("news.newsletter.subscribe")}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
