---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const videos = [
  {
    title: t("videos.items.0.title"),
    description: t("videos.items.0.description"),
    embedId: "dQw4w9WgXcQ",
    author: "@capybaraworld",
    views: "1.2M"
  },
  {
    title: t("videos.items.1.title"),
    description: t("videos.items.1.description"),
    embedId: "dQw4w9WgXcQ",
    author: "@capylovers",
    views: "856K"
  },
  {
    title: t("videos.items.2.title"),
    description: t("videos.items.2.description"),
    embedId: "dQw4w9WgXcQ",
    author: "@wildlifefacts",
    views: "543K"
  }
];
---

<section id="videos" class="py-20 bg-warm-100 dark:bg-warm-800/50">
  <div class="container mx-auto px-4">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">{t("videos.title")}</h2>
      <p class="text-warm-700 dark:text-warm-300">{t("videos.subtitle")}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        videos.map(video => (
          <div class="bg-white dark:bg-warm-900 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow duration-300">
            <div class="relative pb-[56.25%] overflow-hidden">
              <iframe
                src={`https://www.youtube.com/embed/${video.embedId}`}
                title={video.title}
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen
                class="absolute top-0 left-0 w-full h-full"
              />
            </div>

            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">{video.title}</h3>
              <p class="text-warm-700 dark:text-warm-300 mb-4">
                {video.description}
              </p>

              <div class="flex items-center justify-between">
                <div class="flex items-center gap-2 text-warm-600 dark:text-warm-400 text-sm">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="w-4 h-4"
                  >
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                  </svg>
                  <span>{video.author}</span>
                </div>

                <div class="flex items-center gap-2 text-warm-600 dark:text-warm-400 text-sm">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="w-4 h-4"
                  >
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                  <span>
                    {video.views} {t("videos.views")}
                  </span>
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>

    <div class="mt-12 text-center">
      <a
        href="https://tiktok.com/tag/capybara"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center gap-2 px-6 py-3 bg-black text-white rounded-full font-medium hover:bg-gray-900 transition-colors"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-5 h-5"
        >
          <path d="M9 12a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"></path>
          <path d="M15 8a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path>
          <path d="M15 8v8a4 4 0 0 1-4 4H9"></path>
          <line x1="15" y1="4" x2="21" y2="4"></line>
        </svg>
        {t("videos.moreTikTok")}
      </a>
    </div>
  </div>
</section>
